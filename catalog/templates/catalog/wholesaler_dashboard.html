{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="min-h-screen bg-gray-50 pb-20"> {# padding-bottom for nav bar #}

  <!-- Page Content -->
  <main class="max-w-7xl mx-auto px-6 py-8">
    <h1 class="text-2xl font-bold mb-6">My Products</h1>

    <!-- Stats Cards (3-column grid, clickable) -->
<div class="grid grid-cols-3 gap-4 mb-6 text-center">

  <!-- Total Products -->
  <a href="{% url 'catalog:wholesaler_dashboard' %}?filter=all"
     class="bg-white rounded-xl shadow p-4 flex flex-col items-center hover:shadow-md transition">
    <div class="text-2xl font-semibold">{{ total_products }}</div>
    <div class="text-sm text-gray-500 mt-1">Products</div>
  </a>

  <!-- Out of Stock -->
  <a href="{% url 'catalog:wholesaler_dashboard' %}?filter=out"
     class="bg-white rounded-xl shadow p-4 flex flex-col items-center hover:shadow-md transition">
    <div class="text-2xl font-semibold text-red-600">{{ out_of_stock }}</div>
    <div class="text-sm text-gray-500 mt-1">Out of Stock</div>
  </a>

  <!-- Low Stock -->
  <a href="{% url 'catalog:wholesaler_dashboard' %}?filter=low"
     class="bg-white rounded-xl shadow p-4 flex flex-col items-center hover:shadow-md transition">
    <div class="text-2xl font-semibold text-yellow-600">{{ low_stock }}</div>
    <div class="text-sm text-gray-500 mt-1">Low Stock</div>
  </a>

</div>



    <!-- Product Cards (2-column grid) -->
      <div class="grid grid-cols-2 gap-4 sm:grid-cols-2 md:grid-cols-4">

      {% for product in products %}
      <a href="{% url 'catalog:product_edit' product.pk %}"
   class="bg-white rounded-xl shadow p-4 flex flex-col hover:shadow-md transition">
  
  {% if product.image %}
    <img src="{{ product.image.url }}" alt="{{ product.name }}"
         class="w-full h-40 object-cover rounded-lg mb-3">
  {% else %}
    <div class="w-full h-40 bg-gray-100 rounded-lg flex items-center justify-center text-gray-400">
      No Image
    </div>
  {% endif %}

  <div class="mb-2">
    <p class="font-semibold text-gray-800 truncate">{{ product.name }}</p>
    <p class="text-xs text-gray-500">{{ product.sku }}</p>
  </div>

  <div class="flex justify-between items-center mt-auto">
    <div class="flex items-center gap-1 text-gray-700">
      <span>â‚¹</span>
      <span>{{ product.wholesale_price }}</span>
    </div>
    <div class="text-sm text-gray-600">
      {{ product.total_stock }} pcs
    </div>
  </div>
</a>


      {% empty %}
      <p class="text-gray-500">No products yet. Click + to add one.</p>
      {% endfor %}
    </div>
  </main>

  <!-- Floating Add Product Button -->
  <a href="{% url 'catalog:product_add' %}" 
   class="fixed bottom-20 right-6 bg-black text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg hover:bg-gray-800 transition">
  <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
  </svg>
</a>


  <!-- Bottom Navigation -->
  <nav class="fixed bottom-0 left-0 w-full bg-white border-t shadow-md">
    <div class="max-w-7xl mx-auto flex justify-around items-center py-2">

      <!-- Products -->
      <a href="{% url 'catalog:wholesaler_dashboard' %}"
         class="flex flex-col items-center text-xs 
         {% if request.resolver_match.url_name == 'wholesaler_dashboard' and request.resolver_match.app_name == 'catalog' %}
           text-blue-600 font-medium
         {% else %}
           text-gray-500 hover:text-gray-800
         {% endif %}">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M20 13V7a2 2 0 00-2-2h-3V3H9v2H6a2 2 0 00-2 2v6h16zM4 17h16M4 21h16"/>
        </svg>
        <span>Products</span>
      </a>

      <!-- Orders -->
      <a href="{% url 'orders:list' %}"
         class="flex flex-col items-center text-xs 
         {% if request.resolver_match.app_name == 'orders' %}
           text-blue-600 font-medium
         {% else %}
           text-gray-500 hover:text-gray-800
         {% endif %}">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M3 3h18l-1 9H4L3 3zM16 13a4 4 0 11-8 0"/>
        </svg>
        <span>Orders</span>
      </a>

      <!-- Reports -->
      <a href="#"
         class="flex flex-col items-center text-xs 
         {% if request.resolver_match.url_name == 'product_list' %}
           text-blue-600 font-medium
         {% else %}
           text-gray-500 hover:text-gray-800
         {% endif %}">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M9 17v-6h13M9 7h13M3 3h2v18H3z"/>
        </svg>
        <span>Reports</span>
      </a>
    </div>
  </nav>
</div>
{% endblock %}
